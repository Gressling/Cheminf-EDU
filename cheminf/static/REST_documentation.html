<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>ChemINF-EDU REST Documentation</title>
    <link rel="stylesheet" href="/static/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      .doc-container {
        padding: 20px;
      }
      details {
        margin-bottom: 15px;
        border: 1px solid var(--border-color);
        padding: 10px;
        border-radius: 5px;
      }
      summary {
        font-weight: bold;
        color: var(--accent-color);
        cursor: pointer;
      }
      pre {
        background-color: #2d2d2d;
        color: #ccc;
        padding: 10px;
        overflow-x: auto;
      }
      .endpoint ul {
        margin: 5px 0 0 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Home link aligned left -->
      <div style="text-align: left; padding: 10px;">
         <a href="/" style="color: white; text-decoration: none;">&larr; Home</a>
      </div>
      <h1>REST API Documentation</h1>
      <div class="doc-container">
        
        <!-- Molecules Endpoints -->
        <details>
          <summary>Molecules Endpoints</summary>
          <div class="endpoint">
            <h2>GET /api/molecules</h2>
            <p><strong>Summary:</strong> Get all molecules</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: List of molecules (array of Molecule objects)</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/molecules HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>[
  {
    "id": 1,
    "MoleculeUpacName": "Water",
    "SMILES": "O"
  },
  {
    "id": 2,
    "MoleculeUpacName": "Ethanol",
    "SMILES": "CCO"
  }
]</code></pre>
          </div>
          <div class="endpoint">
            <h2>POST /api/molecules</h2>
            <p><strong>Summary:</strong> Create a new molecule</p>
            <p><strong>Request Body:</strong> NewMolecule object</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>201: Molecule created successfully</li>
              <li>400: Invalid request payload</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>POST /api/molecules HTTP/1.1
Content-Type: application/json

{
  "MoleculeUpacName": "Acetone"
}</code></pre>
            <p><strong>Example Response (201):</strong></p>
            <pre><code>{
  "message": "Molecule created successfully"
}</code></pre>
          </div>
          <!-- Additional Molecules endpoints (PUT, DELETE) here -->
        </details>
        
        <!-- Inventory Endpoints -->
        <details>
          <summary>Inventory Endpoints</summary>
          <div class="endpoint">
            <h2>GET /api/inventory</h2>
            <p><strong>Summary:</strong> Get all inventory entries</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: List of inventory entries (array of Inventory objects)</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/inventory HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>[
  {
    "id": 1,
    "MoleculeUpacName": "Water",
    "amount": 1000,
    "unit": "ml"
  }
]</code></pre>
          </div>
          <!-- Additional Inventory endpoints (POST, PUT, DELETE, search) here -->
        </details>
        
        <!-- Projects Endpoints -->
        <details>
          <summary>Projects Endpoints</summary>
          <div class="endpoint">
            <h2>GET /api/projects</h2>
            <p><strong>Summary:</strong> Get all projects</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: List of projects (array of Project objects)</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/projects HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>[
  {
    "id": 1,
    "name": "Project Alpha"
  },
  {
    "id": 2,
    "name": "Project Beta"
  }
]</code></pre>
          </div>
          <!-- Additional Projects endpoints (POST, PUT, DELETE) here -->
        </details>
        
        <!-- Tasks Endpoints -->
        <details>
          <summary>Tasks Endpoints</summary>
          <div class="endpoint">
            <h2>GET /api/projects/{project_id}/tasks</h2>
            <p><strong>Summary:</strong> Get all tasks for a project</p>
            <p><strong>Path Parameter:</strong> project_id (integer)</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: List of tasks for the given project (array of Task objects)</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/projects/1/tasks HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>[
  {
    "id": 101,
    "project_id": 1,
    "description": "Task One",
    "content": "Details about task one"
  },
  {
    "id": 102,
    "project_id": 1,
    "description": "Task Two",
    "content": "Details about task two"
  }
]</code></pre>
          </div>
          <!-- Additional Tasks endpoints (POST, PUT, DELETE) here -->
        </details>
        
        <!-- Reactions Endpoints -->
        <details>
          <summary>Reactions Endpoints</summary>
          <div class="endpoint">
            <h2>GET /api/reactions</h2>
            <p><strong>Summary:</strong> Get all reactions</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: List of reactions (array of Reaction objects)</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/reactions HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>[
  {
    "ReactionID": 1,
    "ReactionName": "Combustion",
    "ReactionDescription": "Burning of fuels"
  },
  {
    "ReactionID": 2,
    "ReactionName": "Synthesis",
    "ReactionDescription": "Chemical synthesis reaction"
  }
]</code></pre>
          </div>
          <div class="endpoint">
            <h2>POST /api/reactions</h2>
            <p><strong>Summary:</strong> Create a new reaction</p>
            <p><strong>Request Body:</strong> NewReaction object</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>201: Reaction created successfully</li>
              <li>400: Invalid request payload</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>POST /api/reactions HTTP/1.1
Content-Type: application/json

{
  "ReactionName": "New Reaction",
  "ReactionDescription": "Description of reaction"
}</code></pre>
            <p><strong>Example Response (201):</strong></p>
            <pre><code>{
  "message": "Reaction created successfully"
}</code></pre>
          </div>
          <!-- Additional Reactions endpoints (PUT, DELETE) here -->
        </details>
        
        <!-- Reaction Participants Endpoints -->
        <details>
          <summary>Reaction Participants Endpoints</summary>
          <div class="endpoint">
            <h2>GET /api/reactions/{reaction_id}/participants</h2>
            <p><strong>Summary:</strong> Get all reaction participants for a reaction</p>
            <p><strong>Path Parameter:</strong> reaction_id (integer)</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: List of reaction participants (array of ReactionParticipant objects)</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/reactions/1/participants HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>[
  {
    "ReactionID": 1,
    "MoleculeID": 10,
    "Role": "reactant",
    "StoichiometricCoefficient": 2.0
  },
  {
    "ReactionID": 1,
    "MoleculeID": 20,
    "Role": "product",
    "StoichiometricCoefficient": 1.0
  }
]</code></pre>
          </div>
          <div class="endpoint">
            <h2>POST /api/reactions/{reaction_id}/participants</h2>
            <p><strong>Summary:</strong> Create a new reaction participant</p>
            <p><strong>Path Parameter:</strong> reaction_id (integer)</p>
            <p><strong>Request Body:</strong> NewReactionParticipant object</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>201: Reaction participant created successfully</li>
              <li>400: Invalid request payload</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>POST /api/reactions/1/participants HTTP/1.1
Content-Type: application/json

{
  "molecule_id": 30,
  "role": "catalyst",
  "stoichiometric_coefficient": 0.5
}</code></pre>
            <p><strong>Example Response (201):</strong></p>
            <pre><code>{
  "message": "Reaction participant created successfully"
}</code></pre>
          </div>
          <div class="endpoint">
            <h2>PUT /api/participants/{reaction_id}/{molecule_id}/{role}</h2>
            <p><strong>Summary:</strong> Update a reaction participant's stoichiometric coefficient</p>
            <p><strong>Path Parameters:</strong> reaction_id (integer), molecule_id (integer), role (string)</p>
            <p><strong>Request Body:</strong> Object containing <code>stoichiometric_coefficient</code></p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: Reaction participant updated successfully</li>
              <li>400: Invalid request payload</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>PUT /api/participants/1/30/catalyst HTTP/1.1
Content-Type: application/json

{
  "stoichiometric_coefficient": 0.75
}</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>{
  "message": "Reaction participant updated successfully"
}</code></pre>
          </div>
          <div class="endpoint">
            <h2>DELETE /api/participants/{reaction_id}/{molecule_id}/{role}</h2>
            <p><strong>Summary:</strong> Delete a reaction participant</p>
            <p><strong>Path Parameters:</strong> reaction_id (integer), molecule_id (integer), role (string)</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: Reaction participant deleted successfully</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>DELETE /api/participants/1/30/catalyst HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>{
  "message": "Reaction participant deleted successfully"
}</code></pre>
          </div>
        </details>
        
        <!-- Time Series Analysis Endpoints -->
        <details>
          <summary>Time Series Analysis Endpoints (v1)</summary>
          <div class="endpoint">
            <h2>GET /api/v1/timeseries/experiments</h2>
            <p><strong>Summary:</strong> Get all time series experiments with rich query options</p>
            <p><strong>Query Parameters:</strong></p>
            <ul>
              <li><code>format</code> (string): Response format - json (default), csv, xml</li>
              <li><code>include_metadata</code> (boolean): Include experiment metadata - default false</li>
              <li><code>limit</code> (integer): Max experiments to return (1-1000) - default 100</li>
              <li><code>offset</code> (integer): Number to skip for pagination - default 0</li>
            </ul>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: List of time series experiments with standardized format</li>
              <li>400: Bad request - invalid parameters</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/v1/timeseries/experiments?limit=2&include_metadata=true&format=json HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>{
  "success": true,
  "timestamp": "2025-11-02T10:00:00Z",
  "data": [
    {
      "experiment_id": 5,
      "series_name": "Aspirin_Synthesis_001",
      "description": "Aspirin synthesis time series data",
      "parameter_count": 4,
      "data_points_count": 100
    }
  ],
  "message": null,
  "total_count": 1,
  "has_more": false,
  "pagination": {
    "current_page": 1,
    "per_page": 2,
    "total_items": 1,
    "total_pages": 1,
    "has_next": false,
    "has_previous": false
  }
}</code></pre>
          </div>
          <div class="endpoint">
            <h2>GET /api/v1/timeseries/experiments/{id}/data</h2>
            <p><strong>Summary:</strong> Get time series data for an experiment with advanced filtering</p>
            <p><strong>Path Parameter:</strong> id (integer) - Experiment ID</p>
            <p><strong>Query Parameters:</strong></p>
            <ul>
              <li><code>format</code> (string): json (default), csv, xml, plotly_json</li>
              <li><code>series_name</code> (string): Filter by specific series name</li>
              <li><code>parameter_name</code> (string): Filter by specific parameter</li>
              <li><code>time_range_start</code> (ISO 8601): Start of time range filter</li>
              <li><code>time_range_end</code> (ISO 8601): End of time range filter</li>
              <li><code>sampling</code> (string): every_nth or time_interval</li>
              <li><code>sampling_value</code> (integer): nth point or interval in seconds</li>
              <li><code>aggregation</code> (string): avg, min, max, sum, count</li>
              <li><code>limit</code> (integer): Max data points per parameter (1-50000) - default 10000</li>
            </ul>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: Time series data in requested format</li>
              <li>404: Experiment not found</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/v1/timeseries/experiments/5/data?parameter_name=temperature&limit=50 HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>{
  "success": true,
  "timestamp": "2025-11-02T10:00:00Z",
  "data": [
    {
      "experiment_id": 5,
      "series_name": "Aspirin_Synthesis_001",
      "parameter_name": "temperature",
      "time_step": 1,
      "timestamp": "2025-01-01T10:00:00Z",
      "value": 25.0,
      "unit": "째C",
      "notes": null
    }
  ],
  "total_count": 100,
  "has_more": true
}</code></pre>
          </div>
          <div class="endpoint">
            <h2>POST /api/v1/timeseries/experiments/{id}/data</h2>
            <p><strong>Summary:</strong> Add time series data to an experiment (bulk insert)</p>
            <p><strong>Path Parameter:</strong> id (integer) - Experiment ID</p>
            <p><strong>Request Body:</strong> Bulk time series data (max 10,000 points per request)</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>201: Data successfully added</li>
              <li>400: Bad request - invalid data format</li>
              <li>404: Experiment not found</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>POST /api/v1/timeseries/experiments/5/data HTTP/1.1
Content-Type: application/json

{
  "data_points": [
    {
      "series_name": "Aspirin_Synthesis_001",
      "parameter_name": "temperature",
      "time_step": 101,
      "timestamp": "2025-01-01T12:00:00Z",
      "value": 35.0,
      "unit": "째C",
      "notes": "New measurement"
    }
  ],
  "metadata": {
    "batch_id": "BATCH_001",
    "source": "Automated_Logger",
    "notes": "Hourly temperature readings"
  }
}</code></pre>
            <p><strong>Example Response (201):</strong></p>
            <pre><code>{
  "success": true,
  "timestamp": "2025-11-02T10:00:00Z",
  "data": {
    "inserted_count": 1,
    "batch_id": "BATCH_001"
  },
  "message": "Successfully inserted 1 data points"
}</code></pre>
          </div>
          <div class="endpoint">
            <h2>GET /api/v1/timeseries/experiments/{id}/statistics</h2>
            <p><strong>Summary:</strong> Get statistical analysis of time series data</p>
            <p><strong>Path Parameter:</strong> id (integer) - Experiment ID</p>
            <p><strong>Query Parameters:</strong></p>
            <ul>
              <li><code>format</code> (string): json (default), csv, xml</li>
              <li><code>series_name</code> (string): Filter by specific series</li>
              <li><code>parameter_name</code> (string): Filter by specific parameter</li>
              <li><code>include_percentiles</code> (boolean): Include 25th, 50th, 75th percentiles</li>
            </ul>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: Statistical analysis results</li>
              <li>404: Experiment not found</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/v1/timeseries/experiments/5/statistics?include_percentiles=true HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>{
  "success": true,
  "timestamp": "2025-11-02T10:00:00Z",
  "data": [
    {
      "parameter_name": "temperature",
      "series_name": "Aspirin_Synthesis_001",
      "count": 100,
      "min_value": 20.0,
      "max_value": 80.0,
      "avg_value": 45.5,
      "std_dev": 12.3,
      "coefficient_of_variation": 0.27,
      "range": 60.0,
      "percentile_25": 35.0,
      "percentile_50": 45.0,
      "percentile_75": 55.0
    }
  ]
}</code></pre>
          </div>
          <div class="endpoint">
            <h2>GET /api/v1/timeseries/export</h2>
            <p><strong>Summary:</strong> Bulk export time series data from multiple experiments</p>
            <p><strong>Query Parameters:</strong></p>
            <ul>
              <li><code>format</code> (string): json (default), csv, xml</li>
              <li><code>experiment_ids</code> (string): Comma-separated list of experiment IDs (max 50)</li>
              <li><code>parameters</code> (string): Comma-separated list of parameter names</li>
              <li><code>date_from</code> (YYYY-MM-DD): Start date filter</li>
              <li><code>date_to</code> (YYYY-MM-DD): End date filter</li>
              <li><code>include_metadata</code> (boolean): Include experiment metadata</li>
            </ul>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: Bulk export data in requested format</li>
              <li>400: Bad request - invalid parameters or too many experiments</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/v1/timeseries/export?experiment_ids=5,6&parameters=temperature,pressure&format=csv HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200 - CSV format):</strong></p>
            <pre><code>experiment_id,series_name,parameter_name,time_step,timestamp,value,unit,notes
5,Aspirin_Synthesis_001,temperature,1,2025-01-01T10:00:00Z,25.0,째C,
5,Aspirin_Synthesis_001,pressure,1,2025-01-01T10:00:00Z,1.0,atm,
6,Aspirin_Synthesis_002,temperature,1,2025-01-02T10:00:00Z,26.0,째C,</code></pre>
          </div>
        </details>

        <!-- New LIMS Experiments Endpoints -->
        <details>
          <summary>LIMS Experiments Endpoints</summary>
          <div class="endpoint">
            <h2>GET /api/experiments</h2>
            <p><strong>Summary:</strong> Get all experiments</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: List of experiments (array of Experiment objects)</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/experiments HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>[
  {
    "experiment_id": 1,
    "experiment_name": "Experiment Alpha",
    "description": "Initial experiment.",
    "start_date": "2025-01-01",
    "end_date": "2025-02-01"
  },
  {
    "experiment_id": 2,
    "experiment_name": "Experiment Beta",
    "description": "Follow-up experiment.",
    "start_date": "2025-03-01",
    "end_date": "2025-04-01"
  }
]</code></pre>
          </div>
          <div class="endpoint">
            <h2>GET /api/samples</h2>
            <p><strong>Summary:</strong> Get all samples</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: List of samples (array of Sample objects)</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/samples HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>[
  {
    "sample_id": 1,
    "experiment_id": 1,
    "sample_code": "SMP001",
    "sample_type": "Blood",
    "collection_date": "2025-01-02"
  }
]</code></pre>
          </div>
          <div class="endpoint">
            <h2>GET /api/measurements</h2>
            <p><strong>Summary:</strong> Get all measurements</p>
            <p><strong>Responses:</strong></p>
            <ul>
              <li>200: List of measurements (array of Measurement objects)</li>
              <li>500: Internal server error</li>
            </ul>
            <p><strong>Example Request:</strong></p>
            <pre><code>GET /api/measurements HTTP/1.1
Host: localhost:8050</code></pre>
            <p><strong>Example Response (200):</strong></p>
            <pre><code>[
  {
    "measurement_id": 1,
    "sample_id": 1,
    "parameter": "pH",
    "value": 7.0,
    "unit": "",
    "measurement_date": "2025-01-03T14:30:00Z"
  }
]</code></pre>
          </div>
        </details>
        
      </div>
    </div>
  </body>
</html>